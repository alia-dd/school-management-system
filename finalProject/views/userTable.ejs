<!DOCTYPE html>
<html lang="en">
    <%-include('./partials/header2.ejs')%>
<body>
    
    <%-include('./partials/nav.ejs')%>
  
        <h1>Student INFORMATION TABLE</h1>
    
        <script>
          window.onload = function() {
              const message = '<%= message %>';
              if (message) {
                  alert(message);
              }
          };
      </script>
        
        <table border="1">
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Age</th>
            <th>Subject</th>
            <th>Instructor</th>
            <th>Fee</th>
            <th>Start Date</th>
            <th>Status</th>
            <th colspan="2">Action</th>
          </tr>
          
          <% users.forEach(user => { %>
            <tr>
              <td><%= user.id %></td>
              <td><%= user.name %></td>
              <td><%= user.age %></td>
              <td><%= user.subject %></td>
              <td><%= user.instructor %></td>
              <td><%= user.fee %></td>
              <td><%= user.startdate %></td>
              <td><%= user.status %></td>
              <td><a href="/updateForm/<%= user._id %>">update</a></td>
              <td class="delete"><a href="#" onclick="confirmDelete('<%= user._id %>')">Delete</a></td>
            </tr>
          <% }); %>
        </table>
        
        <!-- Add this JavaScript function in the userTable.ejs file -->
      <script>
        function confirmDelete(userId) {
          var result = confirm("Are you sure you want to delete this user?");
          if (result) {
            // If the user clicks 'OK', redirect to the delete route
            window.location.href = "/deleteUser/" + userId;
          } else {
            // If the user clicks 'Cancel', do nothing
            console.log("Deletion canceled");
          }
        }
      </script>


        <%-include('./partials/footer.ejs')%>
</body>
</html>
